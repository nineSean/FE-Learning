<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    li {
      list-style: none;
    }

    .container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    [data-role=carousel] {
      position: relative;
      margin: 10px;
      height: 300px;
      width: 500px;
      overflow: hidden;
    }

    .imgs-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      width: 2500px;
    }

    [data-role=carousel] > .imgs-wrapper img {
      height: 300px;
      width: 500px;
      float: left;
    }

    [data-role=carousel] > .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: 25px solid transparent;
    }

    [data-role=carousel] > .pre {
      border-right-color: rgba(0, 0, 0, .6);
    }

    [data-role=carousel] > .next {
      right: 0;
      border-left-color: rgba(0, 0, 0, .6);
    }

    [data-role=carousel] > .pre:hover {
      border-right-color: rgba(255, 255, 255, .8);
    }

    [data-role=carousel] > .next:hover {
      border-left-color: rgba(255, 255, 255, .8);
    }

    [data-role=carousel] > .buttons {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    [data-role=carousel] > .buttons > li {
      float: left;
      height: 30px;
      width: 30px;
      line-height: 30px;
      text-align: center;
      color: rgba(255, 255, 255, .8);
      background-color: rgba(0, 0, 0, .6);
      border-radius: 50%;
      margin: 0 10px;
    }

    [data-role=carousel] > .buttons > li.active {
      color: rgba(0, 0, 0, .6);
      background-color: rgba(255, 255, 255, .8);
    }

  </style>
</head>
<body>
<div class="container">
  <div data-role="carousel">
    <div class="imgs-wrapper">
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/3.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/5.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/9.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/15.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/16.jpg" alt="">
      </a>
    </div>
    <div class="arrow pre"></div>
    <div class="arrow next"></div>
    <ol class="buttons">
      <li class="button1 active">1</li>
      <li class="button2">2</li>
      <li class="button3">3</li>
      <li class="button4">4</li>
      <li class="button5">5</li>
    </ol>
  </div>
  <div data-role="carousel">
    <div class="imgs-wrapper">
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/3.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/5.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/9.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/15.jpg" alt="">
      </a>
      <a href="#">
        <img src="http://onjs2gyy6.bkt.clouddn.com/image/jpg/16.jpg" alt="">
      </a>
    </div>
    <div class="arrow pre"></div>
    <div class="arrow next"></div>
    <ol class="buttons">
      <li class="button1 active">1</li>
      <li class="button2">2</li>
      <li class="button3">3</li>
      <li class="button4">4</li>
      <li class="button5">5</li>
    </ol>
  </div>
</div>
<script
  src="http://code.jquery.com/jquery-3.2.0.js"
  integrity="sha256-wPFJNIFlVY49B+CuAIrDr932XSb6Jk3J1M22M3E2ylQ="
  crossorigin="anonymous"></script>
<script>
  class Carousel {
    constructor(options) {
      this.wrapper = options.wrapper
    }

  }
  let $carousel = $('[data-role=carousel]').eq(0)
  let $viewport = $carousel.children('.imgs-wrapper')
  let $imgs = $viewport.children()
  let $imgsLength = $imgs.length
  let $viewportWidth = $imgs.find('img').width()
  let $firstImg = $imgs.first()
  let $lastImg = $imgs.last()
  let current = 1

  $firstImg.clone().appendTo($viewport)
  $lastImg.clone().prependTo($viewport)
  $viewport.css({
    width: parseInt($viewportWidth, 10) * ($imgsLength + 2),
    left: -$viewportWidth
  })
  let isPlay = false
  function play(index) {
    if(isPlay) return
    isPlay = true
    stopAuto()
    $viewport.stop(true, true).animate({
      left: -$viewportWidth * index
    }, 500, function () {
      if (index === 0) {
        $viewport.css({
          left: -$viewportWidth * $imgsLength
        })
        index = $imgsLength
      } else if (index === $imgsLength + 1) {
        $viewport.css({
          left: -$viewportWidth
        })
        index = 1
      }
      current = index % ($imgsLength + 1)
      setButton(index)
      isPlay = false
      if(!hover) autoPlay()
    })
  }
  let timer
  function autoPlay(){
    timer = setInterval(function(){
      next()
    },2000)
  }
  autoPlay()
  function stopAuto(){
    clearInterval(timer)
  }
  function pre() {
    play(current-1)
  }
  $carousel.find('.pre').on('click', function () {
    pre()
  })
  function next() {
    play(current+1)
  }
  $carousel.find('.next').on('click', function () {
    next()
  })
  $carousel.find('.buttons').on('click', 'li', function () {
    let $li = this
    let index = $carousel.find('.buttons').children().index($li)
    play(index+1)
  })
  let hover = false
  $viewport.on('mouseenter', function () {
    stopAuto()
    hover = true
  }).on('mouseleave', function () {
    autoPlay()
    hover = false
  })
  function setButton(index){
    $carousel.find('.buttons').children().eq(index-1).addClass('active').siblings().removeClass('active')
  }
</script>
</body>
</html>
